import telebot
from telebot import types

# –¢–æ–∫–µ–Ω –≤–∞—à–µ–≥–æ –±–æ—Ç–∞
TOKEN = '8053051580:AAFyiRhNzFHWfIf8FdQOGuBwgnJkA6NxKUQ'
bot = telebot.TeleBot(TOKEN)

# –í–æ–ø—Ä–æ—Å—ã —Ç–µ—Å—Ç–∞
questions = [
    {
        "text": "<b>1. –ö–∞–∫ —Ç—ã –ø–ª–∞–Ω–∏—Ä—É–µ—à—å —Å–≤–æ–π —Ä–∞–±–æ—á–∏–π –¥–µ–Ω—å? üìÖ</b>\n\n"
                "<b>a)</b> –ó–∞ —á–∞—à–∫–æ–π –∫–æ—Ñ–µ, —Ä–∞–∑–≥–ª—è–¥—ã–≤–∞—è –ø–æ—Ç–æ–ª–æ–∫. ‚òï\n"
                "<b>b)</b> –°–æ—Å—Ç–∞–≤–ª—è—é –¥–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω –Ω–∞ –Ω–µ–¥–µ–ª—é. üìù\n"
                "<b>c)</b> –ü—Ä–æ—Å—Ç–æ –∏–¥—É —Ç—É–¥–∞, –≥–¥–µ –ø–∞—Ö–Ω–µ—Ç –¥–µ–Ω—å–≥–∞–º–∏. üí∞\n"
                "<b>d)</b> –û—Ç–∫—Ä—ã–≤–∞—é –∫–∞–ª–µ–Ω–¥–∞—Ä—å –∏ –Ω–∞–¥–µ—é—Å—å, —á—Ç–æ —á—Ç–æ-—Ç–æ —Å–∞–º–æ —Å–æ–±–æ–π –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç. üóìÔ∏è",
        "image": "resources/q1.jpg"  
    },
    {
        "text": "<b>2. –ö–∞–∫ —Ç—ã —Ä–µ–∞–≥–∏—Ä—É–µ—à—å –Ω–∞ –Ω–µ—É–¥–∞—á–∏? üòî</b>\n\n"
                "<b>a)</b> –ü–ª–∞—á—É –≤ –ø–æ–¥—É—à–∫—É. üò≠\n"
                "<b>b)</b> –ê–Ω–∞–ª–∏–∑–∏—Ä—É—é –∏ –∏—â—É —Å–ø–æ—Å–æ–±—ã —É–ª—É—á—à–∏—Ç—å. ü§î\n"
                "<b>c)</b> –ü—ã—Ç–∞—é—Å—å –ø—Ä–æ–¥–∞—Ç—å –ø–æ–¥—É—à–∫—É –∫–∞–∫ '–∞–Ω—Ç–∏–∫—Ä–∏–∑–∏—Å–Ω—ã–π —Ç–æ–≤–∞—Ä'. üí°\n"
                "<b>d)</b> –ü—Ä–æ—Å—Ç–æ –∏–≥–Ω–æ—Ä–∏—Ä—É—é, –≤–µ–¥—å –∑–∞–≤—Ç—Ä–∞ –Ω–æ–≤—ã–π –¥–µ–Ω—å! üåû",
        "image": "resources/q2.jpg"  
    },
    {
        "text": "<b>3. –ö–∞–∫–æ–π —É —Ç–µ–±—è –±–∏–∑–Ω–µ—Å-–ø–ª–∞–Ω? üìÑ</b>\n\n"
                "<b>a)</b> '–°–¥–µ–ª–∞—é —á—Ç–æ-—Ç–æ, –∞ —Ç–∞–º –ø–æ—Å–º–æ—Ç—Ä–∏–º'. ü§∑‚Äç‚ôÇÔ∏è\n"
                "<b>b)</b> –ü–æ–¥—Ä–æ–±–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –Ω–∞ 50 —Å—Ç—Ä–∞–Ω–∏—Ü. üìö\n"
                "<b>c)</b> '–ü–æ–∫–∞ –Ω–µ –ø–æ–∑–¥–Ω–æ, –Ω–∞–¥–æ –∏—Å–∫–∞—Ç—å –∏–Ω–≤–µ—Å—Ç–æ—Ä–æ–≤'. üíº\n"
                "<b>d)</b> '–Ø –ø—Ä–æ—Å—Ç–æ –ª—é–±–ª—é –¥–µ–ª–∞—Ç—å —á—Ç–æ-—Ç–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–µ'. üéØ",
        "image": "resources/q3.jpg"  
    },
    {
        "text": "<b>4. –ö–∞–∫ —Ç—ã –Ω–∞—Ö–æ–¥–∏—à—å —Å–≤–æ–∏—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤? üë•</b>\n\n"
                "<b>a)</b> –°–ª—É—á–∞–π–Ω–æ –Ω–∞ —É–ª–∏—Ü–µ, –∏–Ω–æ–≥–¥–∞ —Å –ø–æ–º–æ—â—å—é —Ñ–ª–∞–µ—Ä–æ–≤. üö∂‚Äç‚ôÇÔ∏è\n"
                "<b>b)</b> –ß–µ—Ä–µ–∑ —Å–æ—Ü—Å–µ—Ç–∏ –∏ —Ä–µ–∫–ª–∞–º—É. üì±\n"
                "<b>c)</b> –£–≥–æ–≤–∞—Ä–∏–≤–∞—é –¥—Ä—É–∑–µ–π —Ä–∞—Å—Å–∫–∞–∑–∞—Ç—å –æ –º–æ—ë–º –±–∏–∑–Ω–µ—Å–µ. ü§ù\n"
                "<b>d)</b> –û–Ω–∏ —Å–∞–º–∏ –∫–æ –º–Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç. –Ø –∂–µ –∫—Ä—É—Ç! üòé",
        "image": "resources/q4.jpg"  
    },
    {
        "text": "<b>5. –ö–∞–∫ —Ç—ã –æ—Ü–µ–Ω–∏–≤–∞–µ—à—å —Å–≤–æ–∏ —Ä–∏—Å–∫–∏? üé≤</b>\n\n"
                "<b>a)</b> '–†–∏—Å–∫ ‚Äî –±–ª–∞–≥–æ—Ä–æ–¥–Ω–æ–µ –¥–µ–ª–æ!' üéØ\n"
                "<b>b)</b> –°–º–æ—Ç—Ä—é –Ω–∞ —Ü–∏—Ñ—Ä—ã –∏ –≥—Ä–∞—Ñ–∏–∫–∏. üìä\n"
                "<b>c)</b> –†–∏—Å—É—é –Ω–∞ –±—É–º–∞–≥–µ –∏ –Ω–∞–¥–µ—é—Å—å –Ω–∞ –ª—É—á—à–µ–µ. üé®\n"
                "<b>d)</b> –ö–∞–∫–æ–π —Ä–∏—Å–∫? –Ø –≤—Å—ë —Ä–∞–≤–Ω–æ –Ω–µ –±–æ—é—Å—å! üí™",
        "image": "resources/q5.jpg"  
    },
    {
        "text": "<b>6. –ß—Ç–æ —Ç—ã –¥—É–º–∞–µ—à—å –æ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–∞—Ö? ü•ä</b>\n\n"
                "<b>a)</b> –≠—Ç–æ –º–æ–∏ –ª—É—á—à–∏–µ –¥—Ä—É–∑—å—è. ü§ù\n"
                "<b>b)</b> –ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–ª–µ–¥–∏—Ç—å –∑–∞ –Ω–∏–º–∏. üëÄ\n"
                "<b>c)</b> –ö–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏—è ‚Äî —ç—Ç–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å! üí°\n"
                "<b>d)</b> –ö—Ç–æ —Ç–∞–∫–∏–µ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç—ã? –Ø –Ω–µ —Å–ª—ã—à–∞–ª. üôâ",
        "image": "resources/q6.jpg"  
    },
    {
        "text": "<b>7. –ö–∞–∫–æ–π —É —Ç–µ–±—è —Å—Ç–∏–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è? üë®‚Äçüíº</b>\n\n"
                "<b>a)</b> '–í—Å–µ –¥–µ–ª–∞—é—Ç, —á—Ç–æ —Ö–æ—Ç—è—Ç!' üéâ\n"
                "<b>b)</b> –°—Ç—Ä–æ–≥–∏–π, –Ω–æ —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤—ã–π. ‚öñÔ∏è\n"
                "<b>c)</b> –ö–∞–∫ –≤ —Ñ–∏–ª—å–º–µ '–°—É–ø–µ—Ä–º–µ–Ω' ‚Äì —è —Å–ø–∞—Å–∞—é –≤—Å–µ—Ö! ü¶∏‚Äç‚ôÇÔ∏è\n"
                "<b>d)</b> –Ø –ø—Ä–æ—Å—Ç–æ –Ω–∞–¥–µ—é—Å—å, —á—Ç–æ –≤—Å–µ –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å. ü§û",
        "image": "resources/q7.jpg"  
    },
    {
        "text": "<b>8. –ö–∞–∫ —Ç—ã —Ä–µ—à–∞–µ—à—å –ø—Ä–æ–±–ª–µ–º—ã? üõ†Ô∏è</b>\n\n"
                "<b>a)</b> –û—Ç–≤–ª–µ–∫–∞—é—Å—å –Ω–∞ –º–µ–º—ã –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ. üòÇ\n"
                "<b>b)</b> –°–æ—Å—Ç–∞–≤–ª—è—é —Å–ø–∏—Å–æ–∫ –¥–µ–π—Å—Ç–≤–∏–π. üìã\n"
                "<b>c)</b> –ü—Ä–∏–¥—É–º—ã–≤–∞—é –∫—Ä–µ–∞—Ç–∏–≤–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è. üí°\n"
                "<b>d)</b> –ñ–¥—É, –∫–æ–≥–¥–∞ –ø—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–∏—Ç—Å—è —Å–∞–º–∞. üï∞Ô∏è",
        "image": "resources/q8.jpg"  
    },
    {
        "text": "<b>9. –ö–∞–∫ —Ç—ã –ø—Ä–∏–≤–ª–µ–∫–∞–µ—à—å –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏? üí∏</b>\n\n"
                "<b>a)</b> –û–±–µ—â–∞—é –∑–æ–ª–æ—Ç—ã–µ –≥–æ—Ä—ã –∏ —Ä–∏—Å—É—é –≥—Ä–∞—Ñ–∏–∫–∏. üìà\n"
                "<b>b)</b> –ü—Ä–µ–¥–ª–∞–≥–∞—é —á—ë—Ç–∫–∏–π –±–∏–∑–Ω–µ—Å-–ø–ª–∞–Ω. üìÑ\n"
                "<b>c)</b> –£–≥–æ–≤–∞—Ä–∏–≤–∞—é –¥—Ä—É–∑–µ–π –≤–ª–æ–∂–∏—Ç—å –¥–µ–Ω—å–≥–∏. ü§ù\n"
                "<b>d)</b> –ü—Ä–æ—Å—Ç–æ –Ω–∞–¥–µ—é—Å—å –Ω–∞ —É–¥–∞—á—É! üçÄ",
        "image": "resources/q9.jpg"  
    },
    {
        "text": "<b>10. –ö–∞–∫ —Ç—ã –æ—Ç–Ω–æ—Å–∏—à—å—Å—è –∫ –∫–æ–º–∞–Ω–¥–µ? üë•</b>\n\n"
                "<b>a)</b> –ö–æ–º–∞–Ω–¥–∞? –≠—Ç–æ –ø—Ä–æ—Å—Ç–æ —Å–ª–æ–≤–æ. üó£Ô∏è\n"
                "<b>b)</b> –ö–æ–º–∞–Ω–¥–∞ ‚Äî —ç—Ç–æ –º–æ—è –æ–ø–æ—Ä–∞! üí™\n"
                "<b>c)</b> –û–Ω–∏ –¥–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–∫ —Å–µ–º—å—è. üë®‚Äçüë©‚Äçüëß‚Äçüë¶\n"
                "<b>d)</b> –Ø –æ–¥–∏–Ω ‚Äì –º–Ω–µ –Ω–µ –Ω—É–∂–Ω–∞ –∫–æ–º–∞–Ω–¥–∞! üö∂‚Äç‚ôÇÔ∏è",
        "image": "resources/q10.jpg"  
    },
    {
        "text": "<b>11. –ö–∞–∫ —Ç—ã –æ—Ü–µ–Ω–∏–≤–∞–µ—à—å —É—Å–ø–µ—Ö? üèÜ</b>\n\n"
                "<b>a)</b> –ü–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –ª–∞–π–∫–æ–≤ –≤ Instagram. ‚ù§Ô∏è\n"
                "<b>b)</b> –ü–æ –ø—Ä–∏–±—ã–ª–∏ –∏ —Ä–æ—Å—Ç—É –±–∏–∑–Ω–µ—Å–∞. üíπ\n"
                "<b>c)</b> –ü–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –¥—Ä—É–∑–µ–π –∏ –∑–Ω–∞–∫–æ–º—ã—Ö. üë•\n"
                "<b>d)</b> –ü–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É —á–∞—à–µ–∫ –∫–æ—Ñ–µ, –≤—ã–ø–∏—Ç—ã—Ö –∑–∞ –¥–µ–Ω—å. ‚òï",
        "image": "resources/q11.jpg"  
    },
    {
        "text": "<b>12. –ö–∞–∫–æ–π —É —Ç–µ–±—è –¥–µ–≤–∏–∑? üó£Ô∏è</b>\n\n"
                "<b>a)</b> '–ö—Ç–æ –Ω–µ —Ä–∏—Å–∫—É–µ—Ç, —Ç–æ—Ç –Ω–µ –ø—å–µ—Ç —à–∞–º–ø–∞–Ω—Å–∫–æ–≥–æ!' üçæ\n"
                "<b>b)</b> '–ü–ª–∞–Ω–∏—Ä—É–π, –¥–µ–π—Å—Ç–≤—É–π, –∞–Ω–∞–ª–∏–∑–∏—Ä—É–π!' üìä\n"
                "<b>c)</b> '–°–º–µ—Ö ‚Äî —ç—Ç–æ –ª—É—á—à–µ–µ –ª–µ–∫–∞—Ä—Å—Ç–≤–æ!' üòÇ\n"
                "<b>d)</b> '–ì–ª–∞–≤–Ω–æ–µ ‚Äî –Ω–µ —Å–¥–∞–≤–∞—Ç—å—Å—è!' üí™",
        "image": "resources/q12.jpg"  
    }
]

# –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∞
results = {
    "a": {"text": "<b>–¢–≤–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: –ü—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç–µ–ª—å-–õ–µ–Ω–∏–≤–µ—Ü! ü¶•</b>\n–¢—ã –≤–µ—Ä–∏—à—å, —á—Ç–æ —É–¥–∞—á–∞ ‚Äî —ç—Ç–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å–ª—É—á–∞–π–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π, –∏ –ø–æ—ç—Ç–æ–º—É —Å—Ç–∞—Ä–∞–µ—à—å—Å—è –Ω–µ —Å–∏–ª—å–Ω–æ –Ω–∞–ø—Ä—è–≥–∞—Ç—å—Å—è.",
          "image": "resources/result1.jpg"},  
    "b": {"text": "<b>–¢–≤–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: –ü—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç–µ–ª—å-–°—Ç—Ä–∞—Ç–µ–≥! üß†</b>\n–¢—ã –≤—Å–µ–≥–¥–∞ –Ω–∞ —à–∞–≥ –≤–ø–µ—Ä–µ–¥–∏ –∏ –ª—é–±–∏—à—å –ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å. –í–æ–∑–º–æ–∂–Ω–æ, —Ç—ã –¥–∞–∂–µ —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –ø–ª–∞–Ω–∏—Ä—É–µ—à—å!",
          "image": "resources/result2.jpg"},  
    "c": {"text": "<b>–¢–≤–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: –ü—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç–µ–ª—å-–ö—Ä–µ–∞—Ç–∏–≤—â–∏–∫! üé®</b>\n–¢—ã –Ω–∞—Ö–æ–¥–∏—à—å –Ω–µ–æ–±—ã—á–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è –∏ –≤—Å–µ–≥–¥–∞ –≥–æ—Ç–æ–≤ –∫ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏—è–º. –ì–ª–∞–≤–Ω–æ–µ, —á—Ç–æ–±—ã –±—ã–ª–æ –≤–µ—Å–µ–ª–æ!",
          "image": "resources/result3.jpg"},  
    "d": {"text": "<b>–¢–≤–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: –ü—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç–µ–ª—å-–û–ø—Ç–∏–º–∏—Å—Ç! üåà</b>\n–¢—ã –≤–µ—Ä–∏—à—å –≤ –ª—É—á—à–µ–µ –∏ –Ω–∞–¥–µ–µ—à—å—Å—è, —á—Ç–æ –≤—Å—ë —Å–∞–º–æ —Å–æ–±–æ–π —É–ª–∞–¥–∏—Ç—Å—è. –ì–ª–∞–≤–Ω–æ–µ ‚Äî –Ω–µ —Ç–µ—Ä—è—Ç—å –ø–æ–∑–∏—Ç–∏–≤–Ω—ã–π –Ω–∞—Å—Ç—Ä–æ–π!",
          "image": "resources/result4.jpg"}   
}

# –•—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ ID —Å–æ–æ–±—â–µ–Ω–∏–π
user_data = {}

# –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /start
@bot.message_handler(commands=['start'])
def start_test(message):
    user_data[message.chat.id] = {"answers": [], "message_ids": []}
    with open("resources/Hello.jpg", "rb") as photo:
        sent_message = bot.send_photo(message.chat.id, photo, caption="<b>–ü—Ä–∏–≤–µ—Ç! –î–∞–≤–∞–π —É–∑–Ω–∞–µ–º, –∫–∞–∫–æ–π —Ç—ã –ø—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç–µ–ª—å. üòä</b>", parse_mode="HTML")
        user_data[message.chat.id]["message_ids"].append(sent_message.message_id)
    
    markup = types.InlineKeyboardMarkup()
    markup.add(types.InlineKeyboardButton("–ù–∞—á–∞—Ç—å —Ç–µ—Å—Ç", callback_data="start_test"))
    sent_message = bot.send_message(message.chat.id, "–ù–∞–∂–º–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å —Ç–µ—Å—Ç.", reply_markup=markup)
    user_data[message.chat.id]["message_ids"].append(sent_message.message_id)

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤–æ–ø—Ä–æ—Å–∞
def ask_question(chat_id, question_index):
    if question_index < len(questions):
        question = questions[question_index]
        markup = types.InlineKeyboardMarkup()
        markup.add(types.InlineKeyboardButton("a", callback_data="a"),
                   types.InlineKeyboardButton("b", callback_data="b"),
                   types.InlineKeyboardButton("c", callback_data="c"),
                   types.InlineKeyboardButton("d", callback_data="d"))
        if question_index > 0:
            markup.add(types.InlineKeyboardButton("–ù–∞–∑–∞–¥", callback_data="back"))
        
        # –£–¥–∞–ª—è–µ–º –ø—Ä–µ–¥—ã–¥—É—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –≤–æ–ø—Ä–æ—Å–æ–º
        if user_data[chat_id]["message_ids"]:
            for msg_id in user_data[chat_id]["message_ids"]:
                try:
                    bot.delete_message(chat_id, msg_id)
                except:
                    pass
            user_data[chat_id]["message_ids"] = []
        
        with open(question["image"], "rb") as photo:
            sent_message = bot.send_photo(chat_id, photo, caption=question["text"], reply_markup=markup, parse_mode="HTML")
            user_data[chat_id]["message_ids"].append(sent_message.message_id)
    else:
        calculate_result(chat_id)

# –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∞–∂–∞—Ç–∏–π –Ω–∞ –∫–Ω–æ–ø–∫–∏
@bot.callback_query_handler(func=lambda call: True)
def handle_callback(call):
    chat_id = call.message.chat.id
    if call.data == "start_test":
        ask_question(chat_id, 0)
    elif call.data == "back":
        if len(user_data[chat_id]["answers"]) > 0:
            user_data[chat_id]["answers"].pop()
        ask_question(chat_id, len(user_data[chat_id]["answers"]))
    elif call.data in ['a', 'b', 'c', 'd']:
        user_data[chat_id]["answers"].append(call.data)
        ask_question(chat_id, len(user_data[chat_id]["answers"]))
    elif call.data == "restart":
        user_data[chat_id] = {"answers": [], "message_ids": []}  # –°–±—Ä–∞—Å—ã–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ
        ask_question(chat_id, 0)  # –ù–∞—á–∏–Ω–∞–µ–º —Ç–µ—Å—Ç —Å –ø–µ—Ä–≤–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–¥—Å—á–µ—Ç–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
def calculate_result(chat_id):
    answers = user_data[chat_id]["answers"]
    if not answers:
        bot.send_message(chat_id, "–¢—ã –Ω–µ –æ—Ç–≤–µ—Ç–∏–ª –Ω–∏ –Ω–∞ –æ–¥–∏–Ω –≤–æ–ø—Ä–æ—Å. –ü–æ–ø—Ä–æ–±—É–π —Å–Ω–æ–≤–∞!", parse_mode="HTML")
        return

    # –ü–æ–¥—Å—á–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –æ—Ç–≤–µ—Ç–æ–≤
    count_a = answers.count('a')
    count_b = answers.count('b')
    count_c = answers.count('c')
    count_d = answers.count('d')

    # –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
    max_count = max(count_a, count_b, count_c, count_d)
    if max_count == count_a:
        result = results["a"]
    elif max_count == count_b:
        result = results["b"]
    elif max_count == count_c:
        result = results["c"]
    else:
        result = results["d"]

    # –£–¥–∞–ª—è–µ–º –ø—Ä–µ–¥—ã–¥—É—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –≤–æ–ø—Ä–æ—Å–æ–º
    if user_data[chat_id]["message_ids"]:
        for msg_id in user_data[chat_id]["message_ids"]:
            try:
                bot.delete_message(chat_id, msg_id)
            except:
                pass
        user_data[chat_id]["message_ids"] = []

    # –û—Ç–ø—Ä–∞–≤–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
    markup = types.InlineKeyboardMarkup()
    markup.add(types.InlineKeyboardButton("–ù–∞—á–∞—Ç—å —Ç–µ—Å—Ç —Å–Ω–∞—á–∞–ª–∞", callback_data="restart"))
    with open(result["image"], "rb") as photo:
        bot.send_photo(chat_id, photo, caption=result["text"], reply_markup=markup, parse_mode="HTML")

# –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
bot.polling()